<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>lib/navigationOpenClose/navigationOpenClose.js - Documentation</title>
    
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav>
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-activityLoader.html">activityLoader</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-activityLoader.html#~createActivityLoader">createActivityLoader</a></li></ul></li><li><a href="module-alertFormOpenClose.html">alertFormOpenClose</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-alertFormOpenClose.html#~alertFormOpenClose">alertFormOpenClose</a></li><li data-type='method' style='display: none;'><a href="module-alertFormOpenClose.html#~shouldAlertFormBeOnTop">shouldAlertFormBeOnTop</a></li></ul></li><li><a href="module-appPauseResume.html">appPauseResume</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-appPauseResume.html#~appPauseResume">appPauseResume</a></li><li data-type='method' style='display: none;'><a href="module-appPauseResume.html#~isInForegroundCheck">isInForegroundCheck</a></li></ul></li><li><a href="module-checkCountlyURL.html">checkCountlyURL</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-checkCountlyURL.html#.checkURL">checkURL</a></li><li data-type='method' style='display: none;'><a href="module-checkCountlyURL.html#.getURL">getURL</a></li></ul></li><li><a href="module-checkDownloadURL.html">checkDownloadURL</a><ul class='members'><li data-type='member' style='display: none;'><a href="module-checkDownloadURL.html#.checkDownloadURL">checkDownloadURL</a></li><li data-type='member' style='display: none;'><a href="module-checkDownloadURL.html#.requestStoragePermissions">requestStoragePermissions</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="module-checkDownloadURL.html#~downloadURL">downloadURL</a></li><li data-type='method' style='display: none;'><a href="module-checkDownloadURL.html#~logStorageError">logStorageError</a></li><li data-type='method' style='display: none;'><a href="module-checkDownloadURL.html#~openSettings">openSettings</a></li></ul></li><li><a href="module-checkEnableFeatures.html">checkEnableFeatures</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-checkEnableFeatures.html#.checkEnableXML">checkEnableXML</a></li><li data-type='method' style='display: none;'><a href="module-checkEnableFeatures.html#.enableDisable">enableDisable</a></li><li data-type='method' style='display: none;'><a href="module-checkEnableFeatures.html#~setiOSDateEnable">setiOSDateEnable</a></li></ul></li><li><a href="module-countlyModule.html">countlyModule</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.crashTest">crashTest</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.enableDebug">enableDebug</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.getDeviceID">getDeviceID</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.recordCrashLog">recordCrashLog</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.recordEvent">recordEvent</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.recordHandledException">recordHandledException</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.recordLocation">recordLocation</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.recordUnhandledException">recordUnhandledException</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.resume">resume</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.start">start</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.stop">stop</a></li><li data-type='method' style='display: none;'><a href="module-countlyModule.html#.userData">userData</a></li></ul></li><li><a href="module-crmSendData.html">crmSendData</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-crmSendData.html#~crmCreateUpdate">crmCreateUpdate</a></li><li data-type='method' style='display: none;'><a href="module-crmSendData.html#~crmLogin">crmLogin</a></li><li data-type='method' style='display: none;'><a href="module-crmSendData.html#~crmSearch">crmSearch</a></li><li data-type='method' style='display: none;'><a href="module-crmSendData.html#~crmSendData">crmSendData</a></li><li data-type='method' style='display: none;'><a href="module-crmSendData.html#~crmSendTask">crmSendTask</a></li><li data-type='method' style='display: none;'><a href="module-crmSendData.html#~getSetCRMUserData">getSetCRMUserData</a></li></ul></li><li><a href="module-customForm.html">customForm</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-customForm.html#.show">show</a></li></ul></li><li><a href="module-getSetFontSize.html">getSetFontSize</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-getSetFontSize.html#~getSetFontSize">getSetFontSize</a></li></ul></li><li><a href="module-locationData.html">locationData</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-locationData.html#.getCurrentLocation">getCurrentLocation</a></li><li data-type='method' style='display: none;'><a href="module-locationData.html#.getLocationData">getLocationData</a></li><li data-type='method' style='display: none;'><a href="module-locationData.html#~getLocationNow">getLocationNow</a></li><li data-type='method' style='display: none;'><a href="module-locationData.html#~logLocationError">logLocationError</a></li></ul></li><li><a href="module-navigationOpenClose.html">navigationOpenClose</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-navigationOpenClose.html#.closeNavigationView">closeNavigationView</a></li><li data-type='method' style='display: none;'><a href="module-navigationOpenClose.html#.navigationGoHome">navigationGoHome</a></li><li data-type='method' style='display: none;'><a href="module-navigationOpenClose.html#.navigationUpdateData">navigationUpdateData</a></li><li data-type='method' style='display: none;'><a href="module-navigationOpenClose.html#.openNavigationView">openNavigationView</a></li><li data-type='method' style='display: none;'><a href="module-navigationOpenClose.html#~navigationOpenCloseView">navigationOpenCloseView</a></li></ul></li><li><a href="module-openLastOpenView.html">openLastOpenView</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-openLastOpenView.html#~openLastOpenView">openLastOpenView</a></li></ul></li><li><a href="module-pushAlert.html">pushAlert</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-pushAlert.html#.pushAlert">pushAlert</a></li><li data-type='method' style='display: none;'><a href="module-pushAlert.html#.showPushXML">showPushXML</a></li><li data-type='method' style='display: none;'><a href="module-pushAlert.html#~pushPopUp">pushPopUp</a></li></ul></li><li><a href="module-reviewDialog.html">reviewDialog</a></li><li><a href="module-scheduleNotifications.html">scheduleNotifications</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-scheduleNotifications.html#.scheduleLocalNotification">scheduleLocalNotification</a></li><li data-type='method' style='display: none;'><a href="module-scheduleNotifications.html#~comeBackToAppNotification">comeBackToAppNotification</a></li><li data-type='method' style='display: none;'><a href="module-scheduleNotifications.html#~scheduleNotification">scheduleNotification</a></li><li data-type='method' style='display: none;'><a href="module-scheduleNotifications.html#~scheduleQODNotification">scheduleQODNotification</a></li><li data-type='method' style='display: none;'><a href="module-scheduleNotifications.html#~scheduleVODNotification">scheduleVODNotification</a></li><li data-type='method' style='display: none;'><a href="module-scheduleNotifications.html#~subscribeToNotifactions">subscribeToNotifactions</a></li></ul></li><li><a href="module-sendForm.html">sendForm</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-sendForm.html#~removeFirstFormFromArray">removeFirstFormFromArray</a></li><li data-type='method' style='display: none;'><a href="module-sendForm.html#~sendFormsFunction">sendFormsFunction</a></li><li data-type='method' style='display: none;'><a href="module-sendForm.html#~storeFormsToSend">storeFormsToSend</a></li><li data-type='method' style='display: none;'><a href="module-sendForm.html#~submitAllForms">submitAllForms</a></li></ul></li><li><a href="module-showFeedbackForm.html">showFeedbackForm</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-showFeedbackForm.html#~inputArrayItemValue">inputArrayItemValue</a></li><li data-type='method' style='display: none;'><a href="module-showFeedbackForm.html#~sendForm">sendForm</a></li><li data-type='method' style='display: none;'><a href="module-showFeedbackForm.html#~showFeedbackForm">showFeedbackForm</a></li></ul></li><li><a href="module-showForms.html">showForms</a><ul class='members'><li data-type='member' style='display: none;'><a href="module-showForms.html#.showShare">showShare</a></li></ul><ul class='methods'><li data-type='method' style='display: none;'><a href="module-showForms.html#.booksReadBasic">booksReadBasic</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#.booksReadComplete">booksReadComplete</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#.booksReadHalf">booksReadHalf</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#.selectedReadingReadComplete">selectedReadingReadComplete</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#.showAppHighUsageForm">showAppHighUsageForm</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#.showContact">showContact</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#~shareRequestForm">shareRequestForm</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#~showBooksReadBasicForm">showBooksReadBasicForm</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#~showBooksReadCompleteForm">showBooksReadCompleteForm</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#~showSelectedReadingReadCompleteForm">showSelectedReadingReadCompleteForm</a></li><li data-type='method' style='display: none;'><a href="module-showForms.html#~showShareFunction">showShareFunction</a></li></ul></li><li><a href="module-subscribeForm.html">subscribeForm</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-subscribeForm.html#~subscribeForm">subscribeForm</a></li></ul></li><li><a href="module-updateApp.html">updateApp</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-updateApp.html#~downloadAlert">downloadAlert</a></li><li data-type='method' style='display: none;'><a href="module-updateApp.html#~downloadUpdate">downloadUpdate</a></li><li data-type='method' style='display: none;'><a href="module-updateApp.html#~installAppUpdate">installAppUpdate</a></li><li data-type='method' style='display: none;'><a href="module-updateApp.html#~showAndroidNotification">showAndroidNotification</a></li><li data-type='method' style='display: none;'><a href="module-updateApp.html#~updateApp">updateApp</a></li></ul></li><li><a href="module-updateCheck.html">updateCheck</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-updateCheck.html#~appVersionCompare">appVersionCompare</a></li><li data-type='method' style='display: none;'><a href="module-updateCheck.html#~checkUpdate">checkUpdate</a></li><li data-type='method' style='display: none;'><a href="module-updateCheck.html#~showUpdateForm">showUpdateForm</a></li></ul></li><li><a href="module-vodPrepare.html">vodPrepare</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-vodPrepare.html#.vodDataTextPrepare">vodDataTextPrepare</a></li><li data-type='method' style='display: none;'><a href="module-vodPrepare.html#~vodDataPrepare">vodDataPrepare</a></li></ul></li></ul><h3>Events</h3><ul><li><a href="global.html#event:app:showAlertMessage">app:showAlertMessage</a></li></ul><h3>Global</h3><ul><li><a href="global.html#Alloy.Globals.AnalyticsDeviceID">Alloy.Globals.AnalyticsDeviceID</a></li><li><a href="global.html#Alloy.Globals.AnalyticsEvent">Alloy.Globals.AnalyticsEvent</a></li><li><a href="global.html#Alloy.Globals.AnalyticsRecordLocation">Alloy.Globals.AnalyticsRecordLocation</a></li><li><a href="global.html#Alloy.Globals.bibleDBTextGenerate">Alloy.Globals.bibleDBTextGenerate</a></li><li><a href="global.html#Alloy.Globals.databaseData">Alloy.Globals.databaseData</a></li><li><a href="global.html#Alloy.Globals.defaultComeBackNotificationDays">Alloy.Globals.defaultComeBackNotificationDays</a></li><li><a href="global.html#Alloy.Globals.defaultNotificationDays">Alloy.Globals.defaultNotificationDays</a></li><li><a href="global.html#Alloy.Globals.defaultNotificationSubscriptions">Alloy.Globals.defaultNotificationSubscriptions</a></li><li><a href="global.html#Alloy.Globals.enableDateDelayedFunctions">Alloy.Globals.enableDateDelayedFunctions</a></li><li><a href="global.html#Alloy.Globals.enableFeaturesDateIOS">Alloy.Globals.enableFeaturesDateIOS</a></li><li><a href="global.html#Alloy.Globals.locationDefault">Alloy.Globals.locationDefault</a></li><li><a href="global.html#Alloy.Globals.openAlertForm">Alloy.Globals.openAlertForm</a></li><li><a href="global.html#Alloy.Globals.openAlertFormArray">Alloy.Globals.openAlertFormArray</a></li><li><a href="global.html#Alloy.Globals.openWindow">Alloy.Globals.openWindow</a></li><li><a href="global.html#Alloy.Globals.qodNotificationTime">Alloy.Globals.qodNotificationTime</a></li><li><a href="global.html#Alloy.Globals.storageDevice">Alloy.Globals.storageDevice</a></li><li><a href="global.html#Alloy.Globals.vodNotificationTime">Alloy.Globals.vodNotificationTime</a></li><li><a href="global.html#databaseUpdateAlert">databaseUpdateAlert</a></li><li><a href="global.html#downloadUpdateDatabases">downloadUpdateDatabases</a></li><li><a href="global.html#updateDatabases">updateDatabases</a></li><li><a href="global.html#VirtualScroller">VirtualScroller</a></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">lib/navigationOpenClose/navigationOpenClose.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
 * navigationOpenClose
 * - openNavigationView opens a new view
 * - closeNavigationView closes a view
 * - navigationGoHome closes all views and returns home
 * - navigationUpdateData updates the view data (textView, topicView etc)
 * 
 * Alloy.Globals:
 * - {@Alloy.Globals.convertLanguageStrings Alloy.Globals.convertLanguageStrings}
 * - {@link Alloy.Globals.bibleDBTextGenerate Alloy.Globals.bibleDBTextGenerate}
 * - {@link Alloy.Globals.openWindow Alloy.Globals.openWindow}
 * - {@link Alloy.Globals.openViewArray Alloy.Globals.openViewArray}
 * - {@link Alloy.Globals.androidExitApp Alloy.Globals.androidExitApp}
 * 
 * @requires   closeMainAndroid 
 * @requires   activityLoader
 * 
 * @module navigationOpenClose
 *
 * @example    &lt;caption>Require and run openNavigationView to open a view&lt;/caption>
 * 
 * 	// require lib navigationOpenClose/navigationOpenClose
	var navigationOpenClose = require('navigationOpenClose/navigationOpenClose');
	
	var chapterData = {	book:book,
						chapter:chapter,
						highlightStart:highlightStart,
						highlightEnd:highlightEnd,
						scroll:scroll,
	};
	
	// set openTextArgs to be passed to TextView window when it is opened
	var openTextViewArgs = {
		chapterData:chapterData,
	};

	// open topicView Window with Args
    var openData = {openCloseView: "TextView",
					openCloseViewData: openTextViewArgs,					
					};
					
	// run openNavigationView
	navigationOpenClose.openNavigationView(openData);

 *
 * @example    &lt;caption>Require and run closeNavigationView to close a view&lt;/caption>
 *
 * 	// require lib navigationOpenClose/navigationOpenClose
	var navigationOpenClose = require('navigationOpenClose/navigationOpenClose');

	// run closeNavigationView
	navigationOpenClose.closeNavigationView();	
 *
 * @example    &lt;caption>Require and run navigationGoHome to go home&lt;/caption>
 *
 * 	// require lib navigationOpenClose/navigationOpenClose
	var navigationOpenClose = require('navigationOpenClose/navigationOpenClose');

	// run closeNavigationView
	navigationOpenClose.navigationGoHome();	
 *
 * @example    &lt;caption>Require and run navigationUpdateData to update view data&lt;/caption>
 *
 * 	// require lib navigationOpenClose/navigationOpenClose
	var navigationOpenClose = require('navigationOpenClose/navigationOpenClose');
	
	// create lastOpenViewParams string	
	var lastOpenViewParams = 	{	lastView: lastView, 
									lastOpenViewData: lastOpenViewData,
								};
	
	// Set Ti.App.Properties - lastOpenView
	Ti.App.Properties.setString('lastOpenView',JSON.stringify(lastOpenViewParams));
	
	// run navigationUpdateData
	navigationOpenClose.navigationUpdateData(lastOpenViewParams); 

 *
 *
 */


/**
 * Opens a navigation view.
 *
 * @param      {object}  openDataVars  The open data variables
 * @param      {string}  openDataVars.openCloseView  The name of the view to open (string)
 * @param      {object}  openDataVars.openCloseViewData  The data of the view to open  
 * @return     {function}  - function that opens a new view with data
 */
exports.openNavigationView = function (openDataVars){
	
	// set openFrom to closeMenu and log below
	var openFrom = this.openFrom;
	
	// START IF - openFrom drawer
	if (openFrom == "drawer"){
		
		// close Menu
		Ti.App.fireEvent('app:openCloseMenu');
			
	};
	// END IF - openFrom drawer
		
	// START IF - check if openDataVars.openCloseView
	if (openDataVars.openCloseView){
		
		// set openView
		var openView = openDataVars.openCloseView;
				
		// START IF - openDataVars.openCloseViewData
		if (openDataVars.openCloseViewData){
			
			// set openViewData
			var openViewData = openDataVars.openCloseViewData;
		
			// set openData and run navigationOpenClose
			var openData = {	openCloseView: openView,
								openCloseViewData: openViewData,
							};
		}else{
			
			// set openData and run navigationOpenClose
			var openData = {	openCloseView: openView};
			
		};
		// END IF - openDataVars.openCloseViewData
		
	}else{
		
		// set openView as this.id
		var openView = this.openView;
		
		//Ti.API.info("openView: " + openView);
		
		// set openData and run navigationOpenClose
		var openData = {openCloseView: openView,};	

	};
	// END IF - check if openData is set else
	
	// run navigationOpenClose
	navigationOpenCloseView(openData);
	
	// START IF - openFrom drawer
	if (openFrom == "drawer"){
		
		// START IF - Alloy.Globals.convertLanguageStrings set strings
		if (Alloy.Globals.convertLanguageStrings){ 
		
			// START log analytics data
			switch (openView) {
				case 'otCategory':
					logMenuButtonPressed(L("otLatin", "false"));
					break;
				case 'ntCategory':
					logMenuButtonPressed(L("ntLatin", "false"));
					break;
				case 'topicCategories':
					logMenuButtonPressed(L("topicsLatin", "false"));
					break;
				case 'bibleTopicCategories':
					logMenuButtonPressed(L("bibleTopicsLatin", "false"));
					break;
				case 'lifeTopicCategories':
					logMenuButtonPressed(L("lifeTopicsLatin", "false"));
					break;
				case 'questionCategories':
					logMenuButtonPressed(L("questionsLatin", "false"));
					break;
				case 'weixinView':
					logMenuButtonPressed(L("weixinLatin", "false"));
					break;
				case 'weiboView':
					logMenuButtonPressed(L("weiboLatin", "false"));
					break;
				default:
					break;
			};
			// END log analytics data
			
		}else{
			
			// START log analytics data
			switch (openView) {
				case 'otCategory':
					logMenuButtonPressed(L("ot"));
					break;
				case 'ntCategory':
					logMenuButtonPressed(L("nt"));
					break;
				case 'topicCategories':
					logMenuButtonPressed(L("topics"));
					break;
				case 'bibleTopicCategories':
					logMenuButtonPressed(L("bibleTopicCategories"));
					break;
				case 'lifeTopicCategories':
					logMenuButtonPressed(L("lifeTopicCategories"));
					break;
				case 'questionCategories':
					logMenuButtonPressed(L("questions"));
					break;
				case 'weixinView':
					logMenuButtonPressed(L("weixin"));
					break;
				case 'weiboView':
					logMenuButtonPressed(L("weibo"));
					break;
				default:
					break;
			};
			// END log analytics data
			
		};
		// END IF - Alloy.Globals.convertLanguageStrings set strings
		
	};
	// END IF - openFrom drawer
	
};

/**
 * Closes a navigation view.
 * @return     {function}  - function to close the current view
 */
exports.closeNavigationView = function(){
	
	// set openData and run navigationOpenClose
	var openData = {openCloseView: "closeView",};
	
	// run navigationOpenClose 
	navigationOpenCloseView(openData);
	
};

/**
 * Closes all views and returns home
 * @return     {function}  - function that can be run to close all views and return to home
 */
exports.navigationGoHome = function(){

	// set openData and run navigationOpenClose
	var openData = {openCloseView: "goHome",};
	
	// run navigationOpenClose 
	navigationOpenCloseView(openData);
	
	// openCloseMenu
	Ti.App.fireEvent('app:closeMenu'); 
	
	// FIRE EVENT - restart dailyScroller animation
	Ti.App.fireEvent('app:dailyScrollerAnimate');
	
	//  FIRE EVENT - to returnHome
    Ti.App.fireEvent("app:returnHome");
     		
};

/**
 * Updates the navigation view data 
 * - used by textView / topicView / questionView / selectedReadingView when a user scrolls to the next view
 *
 * @param      {object}  updateData  The update data
 * @param      {string}  updateData.lastView  The name of the view to open (string)
 * @param      {object}  updateData.lastOpenViewData The update data
 * @return     {function}  - function that updates the navigation view data
 */
exports.navigationUpdateData = function(updateData){
		
	// set updateData
	var updateData = {	openCloseView: "update",
						lastOpenViewData: updateData.lastOpenViewData,	
	};
								
	// run navigationOpenCloseView
	navigationOpenCloseView(updateData);
	
};

/**
 * navigationOpenCloseView Function
 * - opens or closes views based on the data storred in Alloy.Globals.openWindow and Alloy.Globals.openViewArray
 *
 * @param      {object}  openData  The open close view data
 * @param      {string}  openData.openCloseView  The name of the view to open (string)
 * @param      {object}  openData.openCloseViewData  The open close view data
 * 
 */
function navigationOpenCloseView(openData){
	
	//Ti.API.info(openData);
	
	// set currentWindow
	var currentWindow = Alloy.Globals.openWindow;
		
	// set openViewArray
	var openViewArray = Alloy.Globals.openViewArray;
		
	// set openCloseView
	var openCloseView = openData.openCloseView;
	
	// set openCLoseViewData
	var openCloseViewData = openData.openCloseViewData;
	
	// set firstView, currentView and currentViewData
	var firstView = openViewArray[0].openCloseView;
	var currentView = openViewArray[openViewArray.length-1].openCloseView;
	var currentViewData = openViewArray[openViewArray.length-1].openCloseViewData;
	
	// START IF = check if currentView == openCloseView and == Category then return
	if (currentView == openCloseView){
		
		if (openCloseView == "otCategory" || openCloseView == "ntCategory" || openCloseView == "topicCategories" || openCloseView == "bibleTopicCategories" || openCloseView == "lifeTopicCategories" || openCloseView == "questionCategories"){
			//Ti.API.info("Already on Category");
			return;
		};

	};
	// END IF = check if currentView == openCloseView and == Category then return
	
	//Ti.API.info(openViewArray);
	//Ti.API.info(currentWindow.children);
		
	// START IF - Check to close or open Views
	if  (openCloseView == "update"){
		
		//Ti.API.info("navigation - updateData");	
		//Ti.API.info("currentView:" + currentView);
		//Ti.API.info(currentViewData);
		
		// START IF - update currentViewData
		if (currentView == "TextView"){
			
			// update currentViewData
			currentViewData.chapterData = openData.lastOpenViewData;

		}else if (currentView == "TopicView"){
			
			// update currentViewData
			currentViewData.topicData = openData.lastOpenViewData;
 
		}else if (currentView == "questionView"){
			
			// update currentViewData
			currentViewData.questionData = openData.lastOpenViewData;

		}else if (currentView == "selectedReadingView"){
			 		
			// update currentViewData
			currentViewData.selectedReadingData = openData.lastOpenViewData;

		};
		// END IF - update currentViewData
		
	}else if (openCloseView == "closeView"){
		
		// set openViewArrayLength
		var openViewArrayLength = openViewArray.length;
				
		// START IF - set prevView
		if (openViewArrayLength == 1){
			var prevView = "exitApp";			
		}else{
			var prevView = openViewArray[openViewArray.length-2].openCloseView;
		};
		// END IF - set prevView
			
		// START IF - if prevView is mainWindow only remove view else add prevView and then remove currentView
		if (prevView == "exitApp"){
			
				// START IF - check to make sure androidExitApp is false
				if (Alloy.Globals.androidExitApp == false){
					
					//Ti.API.info("Ask Before Closing App");	
					
					// openCloseMenu
					Ti.App.fireEvent('app:closeMenu'); 
									
					// run closeMain function to Ask to Close Main View
					var closeMain = require("closeMainAndroid/closeMainAndroid");
					
					// set closeMainVars language strings for buttons
					var closeMainVars = {	confirm: L("closeAppConfirm"),
											cancel: L("closeAppCancel"),
											title: L("closeAppTitle"),
											message: L("closeAppMessage"),
						
					};
					
					// run closeMain
					closeMain(closeMainVars);
				
				};										
				// END IF - check to make sure androidExitApp is false			
				
		}else if (prevView == firstView){
					
			//Ti.API.info("navigation - prevView == firstView");
			
			// pop last value off array
			openViewArray.pop();
			
			// remove currentView
			var currentViewObject = currentWindow.children[1];
			currentWindow.remove(currentViewObject);
			currentViewObject = null;					
			
			// Ti.App.fireEvent to remove any eventListeners in Views
			Ti.App.fireEvent("app:navigationCloseView");
			
			// FIRE EVENT - restart dailyScroller animation
			Ti.App.fireEvent('app:dailyScrollerAnimate');
			
			//  FIRE EVENT - to returnHome
    		Ti.App.fireEvent("app:returnHome");
    
		}else{
			
			//Ti.API.info("navigation - prevView != firstView");
			
			// set current View as oldViewObject
			var oldViewObject = currentWindow.children[1];
			
			///////////////////////////////////////////////////////////////
			// 				START  - ADDING ACTIVITYLOADER VIEW			//
			
			// require module activityLoader and add to currentWindow
			var activityLoaderFunction = require('activityLoader/activityLoader');
			var activityLoader = activityLoaderFunction();
			currentWindow.add(activityLoader);
			
			// 				END - ADDING ACTIVITYLOADER VIEW			 //	
			///////////////////////////////////////////////////////////////
		
			// set preView Data
			var prevOpenCloseView = openViewArray[openViewArray.length-2].openCloseView;
			var prevOpenCloseViewData = openViewArray[openViewArray.length-2].openCloseViewData;
			
			// Ti.App.fireEvent to remove any eventListeners in Views
			Ti.App.fireEvent("app:navigationCloseView");
			
			// pop last value off array
			openViewArray.pop();	
			
			// START IF - check if openCloseViewData is set and create view
			if (prevOpenCloseViewData){
				var prevViewToOpen = Alloy.createController(prevOpenCloseView, prevOpenCloseViewData).getView();
			}else{
				var prevViewToOpen = Alloy.createController(prevOpenCloseView).getView();
			};						
			// END IF - check if openCloseViewData is set and create view	

			// add prevView
			currentWindow.add(prevViewToOpen);
		
			// remove currentView
			currentWindow.remove(oldViewObject);
			oldViewObject = null;
			
			// REMOVE ACTIVITYLOADER VIEW
			currentWindow.remove(activityLoader);
				
		};
		// END IF - if prevView is mainWindow only remove view else add prevView and then remove currentView
		
	}else if (openCloseView == "goHome"){
		
		// START IF - currentView not firstView
		if (currentView != firstView){	
			
			//Ti.API.info("navigation - currentView != firstView");
			
			// set currentViewObject
			var currentViewObject = currentWindow.children[1];
			
			// remove currentView
			currentWindow.remove(currentViewObject);
			currentViewObject = null;
				
			// Ti.App.fireEvent to remove any eventListeners in Views
			Ti.App.fireEvent("app:navigationCloseView");
			
			// pop last value off array
			var firstEntryData = openViewArray[0];
			
			// clear array and add back firstEntryData
			openViewArray.length = 0;
			openViewArray.push(firstEntryData);
     
		}else{
			//Ti.API.info("navigation - Already on Home");
		};				
		// END IF - currentView not firstView
			
	}else{ // ELSE OPENVIEW
		
		//Ti.API.info("navigation - OPENVIEW");
		
		///////////////////////////////////////////////////////////////
		// 				START  - ADDING ACTIVITYLOADER VIEW			//
		
		// require module activityLoader and add to currentWindow
		var activityLoaderFunction = require('activityLoader/activityLoader');
		var activityLoader = activityLoaderFunction();
		currentWindow.add(activityLoader);
		
		// 				END - ADDING ACTIVITYLOADER VIEW			 //	
		///////////////////////////////////////////////////////////////
		
		// push openData to END OF openViewArray
		var openData = { 	openCloseView: openCloseView,
							openCloseViewData: openCloseViewData,
						};
		
		openViewArray.push(openData);
		
		// Ti.App.fireEvent to remove any eventListeners in Views
		Ti.App.fireEvent("app:navigationCloseView");
				
		// START IF - check if openCloseViewData is set and create view
		if (openCloseViewData){
			var viewToOpen = Alloy.createController(openCloseView, openCloseViewData).getView();
		}else{
			var viewToOpen = Alloy.createController(openCloseView).getView();
		};
		// END IF - check if openCloseViewData is set and create view			
			
		// START IF - if currentView == firstView only add new view else add new view and then remove currentView from view
		if (currentView == firstView){	
			
			//Ti.API.info("navigation - currentView == firstView");
			
			// open view in currentWindow		
			currentWindow.add(viewToOpen);		
			
		}else{ // else add new view and then remove currentView from view but not array
			
			//Ti.API.info("navigation - currentView != firstView");
			
			// open view in currentWindow		
			currentWindow.add(viewToOpen);
			
			// set currentViewObject
			var prevViewObject = currentWindow.children[1];
			
			// remove currentView
			currentWindow.remove(prevViewObject);
			
			// set prevViewObject null
			prevViewObject = null;
			
		};
		// START IF - if currentView == firstView only add new view else add new view and then remove currentView from view
		
		// REMOVE ACTIVITYLOADER VIEW
		currentWindow.remove(activityLoader);	
		
	};
	// END IF - Check to close or open Views

	//Ti.API.info(openViewArray);
	//Ti.API.info(currentWindow.children);
			
};</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/jquery-3.1.1.min.js"></script>

<script src="scripts/search.js"></script>


<script src="scripts/collapse.js"></script>



</body>
</html>
